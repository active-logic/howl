âŠ System.IO;
âŠ InvOp = System.InvalidOperationException;
âŠ NUnit.Framework;
âŠ Active.Howl;

âŠ“ Unit{
â€’ â—‹ RepTest : TestBase{

    // Test factory methods ----------------------------------------

    ØŸ FromTuple()
    { Rep x = ("a", "b"); o(x.a, "a"); o(x.b, "b"); }

    ØŸ FromBinaryTuple_Bridging(){
        Rep x = ("ğŸ©", "Class ");
        o( x.bridge, âœ“ );
    }

    ØŸ FromTernaryTuple_Bridging(){
        Rep x = ("ğŸ˜", "class ", alt: "x");
        o( x.bridge, âœ“ );
    }

    ØŸ FromNew_ImplicitBridging(){
        âˆ™ x = âŒ¢ Rep("â¥", "public void", px: "pv");
        o( x.bridge, âœ“);
    }

    ØŸ FromTuple_badDef(){
        à² á´—à² <InvOp>(() â†’ { Rep x = ((ã„¹)âˆ…, "x"); });
        à² á´—à² <InvOp>(() â†’ { Rep x = ("x",(ã„¹)âˆ…); });
    }

    ØŸ Mul(){
        Rep x = ("â¦¿", "void");
        o("â¦¿ Act()" * x, "void Act()");
    }

    ØŸ Minus(){
        Rep x = ("â¦¿", "void");
        o(x.nts, âœ—);
        o((-x).nts, âœ“);
    }

    ØŸ Nit() â†’ o( âŒ¢ Rep("â‰¥", ">=").nit, âœ“ );

    ØŸ Encloses(){
        Rep x = ("P", "public"), y = ("PS", "public static");
        o(x.Encloses(y), âœ—);
        o(y.Encloses(x), âœ“);
    }

    ØŸ Encloses_MustBeWider(){
        Rep x = ("A", "public"), y = ("B", "public");
        o(x.Encloses(y), âœ—);
        o(y.Encloses(x), âœ—);
    }

    ØŸ Name_1(){
        Rep x = ("-", "namespace ");
        o(x.name, "Namespace");
    }

    ØŸ Name_2(){
        Rep x = ("-", "using static");
        o(x.name, "Using static");
    }

    ØŸ Div(){
        Rep x = ("â¦¿", "void");
        o("void Act()" / x, "â¦¿ Act()");
    }

    ØŸ Div_honors_word_boundaries(){
        Rep x = ("â€¢", ".Value");
        o(x.bridge, âœ“);
        o("[i].ValueMatches(key)".Tokenize() / x,
          "[i].ValueMatches(key)".Tokenize());
    }

    ØŸ Div2(){
        Rep x = ("â¥", "public void");
        o("public void Act()" / x, "â¥ Act()");
    }

    #if UNITY_EDITOR
    ØŸ Div_ConflictThrows(){
        System.â’œ act = () â†’ {
            âˆ™ ã„¸ = "ãƒ¡.Reach".Tokenize() / (Rep)("ãƒ¡", "Vector3");
        };
        â¤´(Config.Î¹.ignoreConflicts){
            act();
        }â¤µ à² á´—à² <InvOp>( () â†’ act() );

    }
    #endif

    ØŸ Div_bridged(){
        Rep x = ("!", "public static");
        o("public static void" / x, "! void");
    }

    ØŸ Div_tokenized(){
        Rep x = ("á†", "int");
        o("Print(foo); int z;" / x, "Print(foo); á† z;");
    }

    ØŸ DivArray_bridged(){
        Rep x = ("!", "public static");
        o(âŒ¢ ã„¹[]{"public", " ", "static"} / x, âŒ¢ ã„¹[]{"!"});
    }

    ØŸ DivArray_tokenized(){
        Rep x = ("á†", "int");
        o(âŒ¢ ã„¹[]{"Print", " ", "void"} / x,
          âŒ¢ ã„¹[]{"Print", " ", "void"});
    }

    ØŸ Validate(){
        à² á´—à² <InvOp>( () â†’ Rep.Validate(âˆ…) );
        à² á´—à² <InvOp>( () â†’ Rep.Validate("?") );
        à² á´—à² <InvOp>( () â†’ Rep.Validate("") );
        à² á´—à² <InvOp>( () â†’ Rep.Validate(" ") );
    }

    ØŸ ToString_(){
        Rep x = ("á†", "int");
        o( xğŸ , "Int âŒá†âŒ â†’ âŒintâŒ" );
    }

}}
